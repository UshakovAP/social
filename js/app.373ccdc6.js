(function(){"use strict";var t={3348:function(t,e,o){var s=o(9963),a=o(6252);const n={class:"app"};function i(t,e,o,s,i,r){const l=(0,a.up)("nav-bar"),c=(0,a.up)("router-view");return(0,a.wg)(),(0,a.iD)("div",n,[(0,a.Wm)(l),(0,a.Wm)(c)])}o(7658);const r={class:"nav"},l={class:"container"};function c(t,e,o,s,n,i){const c=(0,a.up)("the-green-button");return(0,a.wg)(),(0,a.iD)("nav",r,[(0,a._)("div",l,[(0,a.Wm)(c,{onClick:e[0]||(e[0]=e=>t.$router.push("/"))},{default:(0,a.w5)((()=>[(0,a.Uk)("Главная")])),_:1}),(0,a.Wm)(c,{onClick:e[1]||(e[1]=e=>t.$router.push("/posts"))},{default:(0,a.w5)((()=>[(0,a.Uk)("Работа с постами")])),_:1})])])}var d={},p=o(3744);const u=(0,p.Z)(d,[["render",c],["__scopeId","data-v-f6273a50"]]);var h=u,m={components:{NavBar:h}};const v=(0,p.Z)(m,[["render",i]]);var g=v;const f={class:"btn",type:"button"};function w(t,e,o,s,n,i){return(0,a.wg)(),(0,a.iD)("button",f,[(0,a.WI)(t.$slots,"default",{},void 0,!0)])}var y={name:"the-green-button"};const P=(0,p.Z)(y,[["render",w],["__scopeId","data-v-4a80c89e"]]);var _=P;const b={class:"btn btn--red",type:"button"};function k(t,e,o,s,n,i){return(0,a.wg)(),(0,a.iD)("button",b,[(0,a.WI)(t.$slots,"default",{},void 0,!0)])}var S={name:"the-red-button"};const C=(0,p.Z)(S,[["render",k],["__scopeId","data-v-5b66ae7f"]]);var V=C;const D=["value"];function W(t,e,o,s,n,i){return(0,a.wg)(),(0,a.iD)("input",{class:"input",type:"text",value:o.modelValue,onInput:e[0]||(e[0]=(...t)=>i.updateInput&&i.updateInput(...t))},null,40,D)}var L={name:"the-input",props:{modelValue:[String,Number]},methods:{updateInput(t){this.$emit("update:modelValue",t.target.value)}}};const O=(0,p.Z)(L,[["render",W],["__scopeId","data-v-50fde2a0"]]);var I=O;const M={class:"modal__inner"};function U(t,e,o,n,i,r){return t.show?((0,a.wg)(),(0,a.iD)("div",{key:0,class:"modal",onClick:e[1]||(e[1]=(...e)=>t.hideModal&&t.hideModal(...e))},[(0,a._)("div",M,[(0,a._)("div",{class:"modal__content",onClick:e[0]||(e[0]=(0,s.iM)((()=>{}),["stop"]))},[(0,a.WI)(t.$slots,"default",{},void 0,!0)])])])):(0,a.kq)("",!0)}var Q={props:{show:{type:Boolean,default:!1}},methods:{hideModal(){this.$emit("update:show",!1)}},mounted(){}},Z={name:"the-modal",mixins:[Q]};const x=(0,p.Z)(Z,[["render",U],["__scopeId","data-v-3c7d6fea"]]);var j=x,$=[_,V,I,j];const T={class:"container"},A=(0,a._)("h2",{class:"title"},[(0,a.Uk)(" Добро пожаловать!"),(0,a._)("br"),(0,a.Uk)("Для перехода к работе с постами нажмите на соответствующую кнопку ")],-1),z=[A];function R(t,e,o,s,n,i){return(0,a.wg)(),(0,a.iD)("div",T,z)}var B={};const H=(0,p.Z)(B,[["render",R]]);var Y=H,q=o(3577);const E={class:"intro"},F={class:"container"},K={style:{display:"flex","justify-content":"center"}},G={key:1,class:"title title--white"},N={class:"pages"},J=["onClick"];function X(t,e,o,s,n,i){const r=(0,a.up)("the-input"),l=(0,a.up)("the-green-button"),c=(0,a.up)("the-select"),d=(0,a.up)("post-form"),p=(0,a.up)("the-modal"),u=(0,a.up)("post-list"),h=(0,a.Q2)("focus");return(0,a.wg)(),(0,a.iD)("div",E,[(0,a._)("div",F,[(0,a.wy)((0,a.Wm)(r,{modelValue:n.searchQuery,"onUpdate:modelValue":e[0]||(e[0]=t=>n.searchQuery=t),placeholder:"Поиск по названию поста..."},null,8,["modelValue"]),[[h]]),(0,a._)("div",K,[(0,a.Wm)(l,{onClick:i.showModal},{default:(0,a.w5)((()=>[(0,a.Uk)("Создать пост")])),_:1},8,["onClick"]),(0,a.Wm)(c,{modelValue:n.selectedSort,"onUpdate:modelValue":e[1]||(e[1]=t=>n.selectedSort=t),options:n.sortOptions},null,8,["modelValue","options"])]),(0,a.Wm)(p,{show:n.modalVisible,"onUpdate:show":e[2]||(e[2]=t=>n.modalVisible=t)},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{onCreate:i.createPost},null,8,["onCreate"])])),_:1},8,["show"]),n.isPostsLoading?((0,a.wg)(),(0,a.iD)("h2",G,"Идет загрузка...")):((0,a.wg)(),(0,a.j4)(u,{key:0,posts:i.sortedAndSearchedPosts,onRemove:i.removePost},null,8,["posts","onRemove"])),(0,a._)("div",N,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.totalPages,(t=>((0,a.wg)(),(0,a.iD)("div",{class:(0,q.C_)(["pages__items",{"current-page":n.page===t}]),key:t,onClick:e=>i.changePage(t)},(0,q.zw)(t),11,J)))),128))])])])}const tt=(0,a._)("h2",{class:"title"},"Создание постов",-1);function et(t,e,o,n,i,r){const l=(0,a.up)("the-input"),c=(0,a.up)("the-green-button"),d=(0,a.Q2)("focus");return(0,a.wg)(),(0,a.iD)(a.HY,null,[tt,(0,a._)("form",{class:"form",onSubmit:e[2]||(e[2]=(0,s.iM)((()=>{}),["prevent"]))},[(0,a.wy)((0,a.Wm)(l,{type:"text",placeholder:"Введите название поста...",modelValue:i.post.title,"onUpdate:modelValue":e[0]||(e[0]=t=>i.post.title=t),style:{margin:"0 0 10px"}},null,8,["modelValue"]),[[d]]),(0,a.Wm)(l,{type:"text",placeholder:"Введите описание поста...",modelValue:i.post.body,"onUpdate:modelValue":e[1]||(e[1]=t=>i.post.body=t),style:{margin:"0 0 10px"}},null,8,["modelValue"]),(0,a.Wm)(c,{onClick:r.createPost},{default:(0,a.w5)((()=>[(0,a.Uk)("Создать")])),_:1},8,["onClick"])],32)],64)}var ot={data(){return{post:{title:"",body:""}}},methods:{createPost(){this.post.id=Date.now(),this.$emit("create",this.post),this.post={title:"",body:""}}}};const st=(0,p.Z)(ot,[["render",et]]);var at=st;const nt=t=>((0,a.dD)("data-v-19ac3b30"),t=t(),(0,a.Cn)(),t),it={key:0},rt=nt((()=>(0,a._)("h2",{class:"title title--white"},"Список постов",-1))),lt={key:1,class:"title title--red"};function ct(t,e,o,n,i,r){const l=(0,a.up)("post-item");return o.posts.length>0?((0,a.wg)(),(0,a.iD)("div",it,[rt,(0,a.Wm)(s.W3,{name:"user-list"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.posts,(e=>((0,a.wg)(),(0,a.j4)(l,{key:e.id,post:e,onRemove:o=>t.$emit("remove",e)},null,8,["post","onRemove"])))),128))])),_:1})])):((0,a.wg)(),(0,a.iD)("h2",lt,"Список постов пуст!"))}const dt={class:"post"},pt={class:"post__content"},ut={class:"post__title"},ht={class:"post__body"};function mt(t,e,o,s,n,i){const r=(0,a.up)("the-red-button");return(0,a.wg)(),(0,a.iD)("div",dt,[(0,a._)("div",pt,[(0,a._)("h2",ut,(0,q.zw)(o.post.id)+". "+(0,q.zw)(o.post.title),1),(0,a._)("p",ht,(0,q.zw)(o.post.body),1)]),(0,a.Wm)(r,{onClick:e[0]||(e[0]=e=>t.$emit("remove",o.post))},{default:(0,a.w5)((()=>[(0,a.Uk)("Удалить")])),_:1})])}var vt={props:{post:{type:Object,required:!0}}};const gt=(0,p.Z)(vt,[["render",mt],["__scopeId","data-v-e6cb566e"]]);var ft=gt,wt={components:{PostItem:ft},props:{posts:{type:Array,required:!0}}};const yt=(0,p.Z)(wt,[["render",ct],["__scopeId","data-v-19ac3b30"]]);var Pt=yt;const _t=t=>((0,a.dD)("data-v-ab970db6"),t=t(),(0,a.Cn)(),t),bt=["value"],kt=_t((()=>(0,a._)("option",{disabled:"",value:""},"Отсортировать посты",-1))),St=["value"];function Ct(t,e,o,s,n,i){return(0,a.wg)(),(0,a.iD)("select",{class:"select",value:o.modelValue,onChange:e[0]||(e[0]=(...t)=>i.changeOption&&i.changeOption(...t))},[kt,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.options,(t=>((0,a.wg)(),(0,a.iD)("option",{key:t.value,value:t.value},(0,q.zw)(t.name),9,St)))),128))],40,bt)}var Vt={name:"the-select",props:{modelValue:{type:String},options:{type:Array,default:()=>[]}},methods:{changeOption(t){this.$emit("update:modelValue",t.target.value)}}};const Dt=(0,p.Z)(Vt,[["render",Ct],["__scopeId","data-v-ab970db6"]]);var Wt=Dt,Lt=o(8433),Ot={components:{PostForm:at,PostList:Pt,TheGreenButton:_,TheSelect:Wt},data(){return{posts:[],modalVisible:!1,isPostsLoading:!1,selectedSort:"",searchQuery:"",page:1,limit:10,totalPages:0,sortOptions:[{value:"title",name:"по названию"},{value:"body",name:"по описанию"}]}},methods:{createPost(t){this.posts.push(t),this.modalVisible=!1},removePost(t){this.posts=this.posts.filter((e=>e.id!==t.id))},showModal(){this.modalVisible=!0},changePage(t){this.page=t},async fetchPosts(){try{this.isPostsLoading=!0;const t=await Lt.Z.get("https://jsonplaceholder.typicode.com/posts",{params:{_page:this.page,_limit:this.limit}});this.totalPages=Math.ceil(t.headers["x-total-count"]/this.limit),this.posts=t.data}catch(t){alert("Ошибка!")}finally{this.isPostsLoading=!1}},async loadMorePosts(){try{this.page+=1,this.isPostsLoading=!0;const t=await Lt.Z.get("https://jsonplaceholder.typicode.com/posts",{params:{_page:this.page,_limit:this.limit}});this.totalPages=Math.ceil(t.headers["x-total-count"]/this.limit),this.posts=[...this.posts,...t.data]}catch(t){alert("Ошибка!")}finally{this.isPostsLoading=!1}}},mounted(){this.fetchPosts()},computed:{sortedPosts(){return[...this.posts].sort(((t,e)=>t[this.selectedSort]?.localeCompare(e[this.selectedSort])))},sortedAndSearchedPosts(){return this.sortedPosts.filter((t=>t.title.toLowerCase().includes(this.searchQuery.toLowerCase())))}},watch:{page(){this.fetchPosts()}}};const It=(0,p.Z)(Ot,[["render",X],["__scopeId","data-v-97fed1d2"]]);var Mt=It;function Ut(t,e,o,s,n,i){return(0,a.wg)(),(0,a.iD)("h1",null,"Страница поста с ID = "+(0,q.zw)(t.$route.params.id),1)}var Qt={};const Zt=(0,p.Z)(Qt,[["render",Ut]]);var xt=Zt;const jt=t=>((0,a.dD)("data-v-56bdcc1c"),t=t(),(0,a.Cn)(),t),$t={class:"intro"},Tt={class:"container"},At=jt((()=>(0,a._)("h1",{class:"title title--white"},"Страница с постами",-1))),zt={style:{display:"flex","justify-content":"center"}},Rt={key:1,class:"title title--white"},Bt={class:"observer"};function Ht(t,e,o,s,n,i){const r=(0,a.up)("the-green-button"),l=(0,a.up)("the-input"),c=(0,a.up)("the-select"),d=(0,a.up)("post-form"),p=(0,a.up)("the-modal"),u=(0,a.up)("post-list"),h=(0,a.Q2)("focus"),m=(0,a.Q2)("intersection");return(0,a.wg)(),(0,a.iD)("div",$t,[(0,a._)("div",Tt,[(0,a._)("h1",null,(0,q.zw)(t.$store.getters.doubleLikes),1),(0,a.Wm)(r,{onClick:e[0]||(e[0]=e=>t.$store.commit("incrementLikes"))},{default:(0,a.w5)((()=>[(0,a.Uk)("Лайк")])),_:1}),(0,a.Wm)(r,{onClick:e[1]||(e[1]=e=>t.$store.commit("decrementLikes"))},{default:(0,a.w5)((()=>[(0,a.Uk)("Дизлайк")])),_:1}),At,(0,a.wy)((0,a.Wm)(l,{"model-value":t.searchQuery,"onUpdate:modelValue":t.setSearchQuery,placeholder:"Поиск по названию поста..."},null,8,["model-value","onUpdate:modelValue"]),[[h]]),(0,a._)("div",zt,[(0,a.Wm)(r,{onClick:i.showModal},{default:(0,a.w5)((()=>[(0,a.Uk)("Создать пост")])),_:1},8,["onClick"]),(0,a.Wm)(c,{"model-value":t.selectedSort,"onUpdate:modelValue":t.setSelectedSort,options:t.sortOptions},null,8,["model-value","onUpdate:modelValue","options"])]),(0,a.Wm)(p,{show:n.modalVisible,"onUpdate:show":e[2]||(e[2]=t=>n.modalVisible=t)},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{onCreate:i.createPost},null,8,["onCreate"])])),_:1},8,["show"]),t.isPostsLoading?((0,a.wg)(),(0,a.iD)("h2",Rt,"Идет загрузка...")):((0,a.wg)(),(0,a.j4)(u,{key:0,posts:t.sortedAndSearchedPosts,onRemove:i.removePost},null,8,["posts","onRemove"])),(0,a.wy)((0,a._)("div",Bt,null,512),[[m,t.loadMorePosts]])])])}var Yt=o(3907),qt={components:{PostForm:at,PostList:Pt,TheGreenButton:_},data(){return{modalVisible:!1}},methods:{...(0,Yt.OI)({setPage:"post/setPage",setSearchQuery:"post/setSearchQuery",setSelectedSort:"post/setSelectedSort"}),...(0,Yt.nv)({loadMorePosts:"post/loadMorePosts",fetchPosts:"post/fetchPosts"}),createPost(t){this.posts.push(t),this.modalVisible=!1},removePost(t){this.posts=this.posts.filter((e=>e.id!==t.id))},showModal(){this.modalVisible=!0}},mounted(){this.fetchPosts()},computed:{...(0,Yt.rn)({posts:t=>t.post.posts,isPostsLoading:t=>t.post.isPostsLoading,selectedSort:t=>t.post.selectedSort,searchQuery:t=>t.post.searchQuery,page:t=>t.post.page,limit:t=>t.post.limit,totalPages:t=>t.post.totalPages,sortOptions:t=>t.post.sortOptions}),...(0,Yt.Se)({sortedPosts:"post/sortedPosts",sortedAndSearchedPosts:"post/sortedAndSearchedPosts"})}};const Et=(0,p.Z)(qt,[["render",Ht],["__scopeId","data-v-56bdcc1c"]]);var Ft=Et,Kt=o(2201);const Gt=[{path:"/",component:Y},{path:"/posts",component:Mt},{path:"/posts/:id",component:xt},{path:"/store",component:Ft}],Nt=(0,Kt.p7)({routes:Gt,history:(0,Kt.PO)("/social/")});var Jt=Nt,Xt={mounted(t){t.focus()},name:"focus"},te={mounted(t,e){const o={rootMargin:"0px",threshold:1},s=t=>{t[0].isIntersecting&&e.value()},a=new IntersectionObserver(s,o);a.observe(t)},name:"intersection"},ee=[Xt,te];const oe={state:()=>({posts:[],isPostsLoading:!1,selectedSort:"",searchQuery:"",page:1,limit:10,totalPages:0,sortOptions:[{value:"title",name:"по названию"},{value:"body",name:"по описанию"}]}),getters:{sortedPosts(t){return[...t.posts].sort(((e,o)=>e[t.selectedSort]?.localeCompare(o[t.selectedSort])))},sortedAndSearchedPosts(t,e){return e.sortedPosts.filter((e=>e.title.toLowerCase().includes(t.searchQuery.toLowerCase())))}},mutations:{setPosts(t,e){t.posts=e},setLoading(t,e){t.isPostsLoading=e},setPage(t,e){t.page=e},setSelectedSort(t,e){t.selectedSort=e},setTotalPages(t,e){t.totalPages=e},setSearchQuery(t,e){t.searchQuery=e}},actions:{async fetchPosts({state:t,commit:e}){try{e("setLoading",!0);const o=await Lt.Z.get("https://jsonplaceholder.typicode.com/posts",{params:{_page:t.page,_limit:t.limit}});e("setTotalPages",Math.ceil(o.headers["x-total-count"]/t.limit)),e("setPosts",[...t.posts,...o.data])}catch(o){alert("Ошибка!")}finally{e("setLoading",!1)}},async loadMorePosts({state:t,commit:e}){try{e("setPage",t.page+=1),this.isPostsLoading=!0;const o=await Lt.Z.get("https://jsonplaceholder.typicode.com/posts",{params:{_page:t.page,_limit:t.limit}});e("setTotalPages",Math.ceil(o.headers["x-total-count"]/t.limit)),e("setPosts",[...this.posts,...o.data])}catch(o){alert("Ошибка!")}}},namespaced:!0};var se=(0,Yt.MT)({modules:{post:oe}});const ae=(0,s.ri)(g);$.forEach((t=>{ae.component(t.name,t)})),ee.forEach((t=>{ae.directive(t.name,t)})),ae.use(Jt).use(se).mount("#app")}},e={};function o(s){var a=e[s];if(void 0!==a)return a.exports;var n=e[s]={exports:{}};return t[s](n,n.exports,o),n.exports}o.m=t,function(){var t=[];o.O=function(e,s,a,n){if(!s){var i=1/0;for(d=0;d<t.length;d++){s=t[d][0],a=t[d][1],n=t[d][2];for(var r=!0,l=0;l<s.length;l++)(!1&n||i>=n)&&Object.keys(o.O).every((function(t){return o.O[t](s[l])}))?s.splice(l--,1):(r=!1,n<i&&(i=n));if(r){t.splice(d--,1);var c=a();void 0!==c&&(e=c)}}return e}n=n||0;for(var d=t.length;d>0&&t[d-1][2]>n;d--)t[d]=t[d-1];t[d]=[s,a,n]}}(),function(){o.d=function(t,e){for(var s in e)o.o(e,s)&&!o.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={143:0};o.O.j=function(e){return 0===t[e]};var e=function(e,s){var a,n,i=s[0],r=s[1],l=s[2],c=0;if(i.some((function(e){return 0!==t[e]}))){for(a in r)o.o(r,a)&&(o.m[a]=r[a]);if(l)var d=l(o)}for(e&&e(s);c<i.length;c++)n=i[c],o.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return o.O(d)},s=self["webpackChunksocial"]=self["webpackChunksocial"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))}();var s=o.O(void 0,[998],(function(){return o(3348)}));s=o.O(s)})();
//# sourceMappingURL=app.373ccdc6.js.map